import{c as F,r as u,j as e,i as g,k as L,y as _,o as k,L as f}from"./index-BL-_5yDk.js";import{C as D,b as I,c as R,d as U,a as E,B as v}from"./card-DFDA8waM.js";import{I as c,S as V,a as G,b as $,c as B,d as M}from"./select-Cx4bOLVj.js";import{L as d}from"./label-CjBe-3g0.js";import{T as H,a as O,b as j,d as w}from"./tabs-CGg4kKSW.js";import{G as z,U as J,C as K}from"./users-BZvUm4Vd.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=F("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),W=L("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),y=u.forwardRef(({className:i,variant:l,...n},o)=>e.jsx("div",{ref:o,role:"alert",className:g(W({variant:l}),i),...n}));y.displayName="Alert";const X=u.forwardRef(({className:i,...l},n)=>e.jsx("h5",{ref:n,className:g("mb-1 font-medium leading-none tracking-tight",i),...l}));X.displayName="AlertTitle";const N=u.forwardRef(({className:i,...l},n)=>e.jsx("div",{ref:n,className:g("text-sm [&_p]:leading-relaxed",i),...l}));N.displayName="AlertDescription";function te(){const[i,l]=u.useState(!1),[n,o]=u.useState(""),[s,m]=u.useState({email:"",password:"",confirmPassword:"",fullName:"",phone:"",role:""}),[p,x]=u.useState({email:"",password:""}),{signUp:b,signIn:C}=_(),{t}=k(),S=()=>{if(!s.role)return"Please select a role";if(!s.fullName.trim())return"Full name is required";if(!s.password||s.password.length<6)return"Password must be at least 6 characters";if(s.password!==s.confirmPassword)return"Passwords do not match";if(s.role==="tutor"){if(!s.email.trim())return"Email is required for tutors";if(!s.phone.trim())return"Phone number is required for tutors"}else if(!s.email.trim()&&!s.phone.trim())return s.role==="student"?"Either email or phone number is required for students":"Either email or phone number is required for guardians";return s.email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)?"Please enter a valid email address":s.phone.trim()&&!/^[\+]?[0-9\-\s\(\)]{10,}$/.test(s.phone)?"Please enter a valid phone number":null},q=async r=>{r.preventDefault(),o("");const a=S();if(a){o(a);return}l(!0);try{const h=s.email.trim()||`${s.phone.replace(/[^0-9]/g,"")}@mindspark.app`;await b(h,s.password,s.role,s.fullName.trim(),s.phone.trim())}catch(h){console.error("Sign up error:",h),o(h.message||"An error occurred during sign up")}finally{l(!1)}},T=async r=>{if(r.preventDefault(),o(""),!p.email.trim()||!p.password){o("Please enter both email and password");return}l(!0);try{await C(p.email,p.password)}catch(a){console.error("Sign in error:",a),o(a.message||"Invalid login credentials")}finally{l(!1)}},P=[{value:"student",label:t("student"),icon:z,description:"Learn with expert tutors"},{value:"tutor",label:t("tutor"),icon:Q,description:"Teach and share knowledge"},{value:"guardian",label:t("guardian"),icon:J,description:"Monitor child's progress"}],A=()=>{switch(s.role){case"tutor":return"Tutors need both email and phone number";case"student":return"Students need either email or phone number";case"guardian":return"Guardians need either email or phone number";default:return"Select your role to see requirements"}};return e.jsx("div",{className:"min-h-screen bg-gradient-primary flex items-center justify-center p-4",children:e.jsxs(D,{className:"w-full max-w-md",children:[e.jsxs(I,{className:"text-center",children:[e.jsx(R,{className:"text-2xl font-bold",children:t("app_name")}),e.jsx(U,{children:t("welcome")})]}),e.jsxs(E,{children:[n&&e.jsxs(y,{variant:"destructive",className:"mb-4",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx(N,{children:n})]}),e.jsxs(H,{defaultValue:"signin",className:"space-y-4",children:[e.jsxs(O,{className:"grid w-full grid-cols-2",children:[e.jsx(j,{value:"signin",children:t("sign_in")}),e.jsx(j,{value:"signup",children:t("sign_up")})]}),e.jsx(w,{value:"signin",children:e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"signin-email",children:t("email")}),e.jsx(c,{id:"signin-email",type:"email",value:p.email,onChange:r=>x(a=>({...a,email:r.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"signin-password",children:t("password")}),e.jsx(c,{id:"signin-password",type:"password",value:p.password,onChange:r=>x(a=>({...a,password:r.target.value})),required:!0})]}),e.jsxs(v,{type:"submit",className:"w-full",disabled:i,children:[i&&e.jsx(f,{className:"mr-2 h-4 w-4 animate-spin"}),t("sign_in")]})]})}),e.jsx(w,{value:"signup",children:e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"role",children:t("select_role")}),e.jsxs(V,{value:s.role,onValueChange:r=>m(a=>({...a,role:r})),children:[e.jsx(G,{children:e.jsx($,{placeholder:t("select_role")})}),e.jsx(B,{children:P.map(r=>e.jsx(M,{value:r.value,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r.icon,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r.label}),e.jsx("div",{className:"text-xs text-muted-foreground",children:r.description})]})]})},r.value))})]}),s.role&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:A()})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"fullName",children:[t("full_name")," *"]}),e.jsx(c,{id:"fullName",type:"text",value:s.fullName,onChange:r=>m(a=>({...a,fullName:r.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"signup-email",children:[t("email")," ",s.role==="tutor"?"*":"(optional if phone provided)"]}),e.jsx(c,{id:"signup-email",type:"email",value:s.email,onChange:r=>m(a=>({...a,email:r.target.value})),required:s.role==="tutor"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"phone",children:[t("phone")," ",s.role==="tutor"?"*":"(optional if email provided)"]}),e.jsx(c,{id:"phone",type:"tel",value:s.phone,onChange:r=>m(a=>({...a,phone:r.target.value})),placeholder:"+880...",required:s.role==="tutor"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"signup-password",children:[t("password")," (min 6 characters) *"]}),e.jsx(c,{id:"signup-password",type:"password",value:s.password,onChange:r=>m(a=>({...a,password:r.target.value})),minLength:6,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"confirm-password",children:[t("confirm_password")," *"]}),e.jsx(c,{id:"confirm-password",type:"password",value:s.confirmPassword,onChange:r=>m(a=>({...a,confirmPassword:r.target.value})),required:!0})]}),e.jsxs(v,{type:"submit",className:"w-full",disabled:i||!s.role,children:[i&&e.jsx(f,{className:"mr-2 h-4 w-4 animate-spin"}),t("sign_up")]})]})})]})]})]})})}export{te as Auth};
